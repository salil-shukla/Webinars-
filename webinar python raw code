### Install Breeze (if new user otherwise skip to Line 16)

pip install breeze-connect==1.0.13

### Important Links

# https://www.icicidirect.com/futures-and-options/api/breeze (homepage)
# https://api.icicidirect.com/apiuser/home (login page)
# https://www.anaconda.com/ (development environment)
# https://pypi.org/project/breeze-connect/ (Python SDK code)

### Connect to Breeze API

#Your account

from breeze_connect import BreezeConnect

breeze = BreezeConnect(api_key="8#70227558K15V197Ah4961006")
breeze.generate_session(api_secret="f261006363wx%58K15V197^o2745",session_token='66277')

### Demat Funds

# Get Funds details of your account.
breeze.get_funds()

### Get Historical Data for specific stock-code

# Get Historical Data for specific stock-code by mentioned interval either as "minute", "5minute", "30minutes" or as "day".
data = breeze.get_historical_data(interval="1day",
                            from_date= "2022-07-01T07:00:00.000Z",
                            to_date= "2022-07-20T07:00:00.000Z",
                            stock_code="ICIBAN",
                            exchange_code="NFO", 
                            product_type="futures",
                            expiry_date="2022-07-28T07:00:00.000Z",
                            right="others",
                            strike_price="0")

# Storing data

import pandas as pd
frame = pd.DataFrame(data['Success'])
frame.to_csv('salil.csv', index=False)

### Place an Options order

# Place an order from your account.
breeze.place_order(stock_code="NIFTY",
                    exchange_code="NFO",
                    product="options",
                    action="buy",
                    order_type="market",
                    stoploss="0",
                    quantity="100",
                    price="",
                    validity="day",
                    validity_date="day",
                    disclosed_quantity="0",
                    expiry_date="2022-07-28T06:00:00.000Z",
                    right="call",
                    strike_price="16500",
                    user_remark="Test")

# Contact us
# breezeapi@icicisecurities.com
